# Test vectors for LZ77+Huffman [de-]compression

The three subdirectories contain files that correspond to each other

./decompressed    - test files to compress with .decomp extension.
./compressed      - files compressed as if for Windows SMB, with .lzhuff
                    extension.
./more-compressed - files compressed more thoroughly by Windows, using
                    more effort than SMB does, with .lzhuff extension.
                    Only some of the decompressed files have been
                    compressed in this way.

The compressed files were compressed on Windows, using the Compression
API, which uses the same underlying code as MS-XCA, but which puts
some annoying hurdles in the way. In particular, it won't compress any
file smaller than 300 bytes. The relationship between the two is
covered in various messages in

https://lists.samba.org/archive/cifs-protocol/2022-October/
https://lists.samba.org/archive/cifs-protocol/2022-November/

Some of the decompressed files were found via fuzzing, some are designed
to test one aspect or another of the format, while others are public
domain texts.

These are used in LZ77 + Huffman compression and decompression tests.

- For decompression tests, we need the decompressed versions to
  compare against.

- For compression tests, we do not assert that the compressed file is
  identical to the Windows compressed file. Exact equality is not
  expected by MS-XCA, which leaves room for implementation tricks, but
  the size of the compressed file allows us to make ballpark
  assertions about expected compression ratios.
